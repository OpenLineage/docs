<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Extending OpenLineage with Facets | OpenLineage</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openlineage.io/blog/extending-with-facets"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Extending OpenLineage with Facets | OpenLineage"><meta data-rh="true" name="description" content="Facets are a self-contained definition of one aspect of a job, dataset, or run at the time the event happened. They make the OpenLineage model extensible."><meta data-rh="true" property="og:description" content="Facets are a self-contained definition of one aspect of a job, dataset, or run at the time the event happened. They make the OpenLineage model extensible."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2021-07-27T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://www.github.com/julienledem/"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://openlineage.io/blog/extending-with-facets"><link data-rh="true" rel="alternate" href="https://openlineage.io/blog/extending-with-facets" hreflang="en"><link data-rh="true" rel="alternate" href="https://openlineage.io/blog/extending-with-facets" hreflang="x-default"><link rel="alternate" type="application/json" href="/blog/feed.json" title="OpenLineage JSON Feed">






<script src="https://plausible.io/js/script.js" defer="defer" data-domain="openlineage.io"></script><link rel="stylesheet" href="/assets/css/styles.f59d10a1.css">
<link rel="preload" href="/assets/js/runtime~main.28523594.js" as="script">
<link rel="preload" href="/assets/js/main.294e6e3e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#f26522;color:#091E42" role="banner"><div class="content_knG7 announcementBarContent_xLdY">Help chart the course of OpenLineage! The 2023 Ecosystem Survey is live and accepting responses. <a href="https://forms.gle/cPk3skNgnB4iab9H6">Submit yours today</a>.</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/ol-logo.svg" alt="OpenLineage" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/ol-logo.svg" alt="OpenLineage" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/getting-started">Getting Started</a><a class="navbar__item navbar__link" href="/resources">Resources</a><a class="navbar__item navbar__link" href="/ecosystem">Ecosystem</a><a class="navbar__item navbar__link" href="/community">Community</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/OpenLineage/openlineage" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/warsaw-meetup">Meet Us in Warsaw on November 29th!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/metaphor-integration">Metaphor&#x27;s Integration with OpenLineage Enhances Data Governance and Collaboration</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/airflow-provider">The OpenLineage Airflow Provider is Here</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/airflow-summit-meetup">Meet Us in Toronto on September 18th!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/1.0-release">Announcing OpenLineage 1.0</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">Extending OpenLineage with Facets</h1><div class="container_mt6G margin-vert--md"><time datetime="2021-07-27T00:00:00.000Z" itemprop="datePublished">July 27, 2021</time> · <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://www.github.com/julienledem/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/367841?v=4" alt="Julien Le Dem"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://www.github.com/julienledem/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Julien Le Dem</span></a></div><small class="avatar__subtitle" itemprop="description">OpenLineage Project Lead</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>Facets are a self-contained definition of one aspect of a job, dataset, or run at the time the event happened. They make the OpenLineage model extensible.</p><h1>Building consensus</h1><p>OpenLineage is an open source project, part of the LFAI&amp;Data foundation, that standardizes lineage collection in the data ecosystem. In this increasingly rich ecosystem - that includes SQL-driven data warehouses, programmatic data processing frameworks like Spark or Pandas, and machine learning - it is near-impossible to maintain a clear and sane view of data lineage across everything without the collaboration of the ecosystem around a shared standard. Open source collaboration is a very powerful mechanism that can produce widely-adopted standard APIs.</p><p><a href="https://openlineage.io/blog/openlineage-takes-inspiration-from-opentelemetry/" target="_blank" rel="noopener noreferrer">OpenLineage draws a clear parallel with OpenTelemetry</a> which provides a standard API to collect traces and metrics in the service world. It also draws from the experience of the Apache Parquet and Apache Arrow projects, which aim to define standard columnar data representations at-rest and in-memory.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="open-source">Open Source<a href="#open-source" class="hash-link" aria-label="Direct link to Open Source" title="Direct link to Open Source">​</a></h2><p>Standardizing an API through open source collaboration can be challenging. On one end, you need to get input and feedback from the people who will use the API in different contexts. On the other, you want to avoid getting stuck in disagreements arising from the different and sometimes incompatible viewpoints that inevitably drive these discussions. Thankfully, there are mechanisms to help organize and decouple those disagreements and drive discussions towards conclusion.</p><p>A community driven open source project works very differently from a product you buy off the shelf. At the very moment you start using it - maybe starting by reading the doc - you become part of the community and start sharing a little bit of ownership. As with any software, you might encounter problems... but in this case, you immediately become part of the solution. In a healthy community, how much of the solution you become is entirely up to you.</p><p>Maybe you spotted a typo and reported it. Maybe you opened a pull request to fix it. You might propose an improvement, or even build one yourself. All of those contributions, no matter how small, make the project better for everyone. That very powerful flywheel motion gathers momentum and drives very successful open source projects.</p><p>One of the success factors of such an open source project is how much it can minimize the friction for new community members who want to contribute. The easier it is to contribute, the faster the project will acquire momentum. It’s not about getting other people’s input, it’s about giving them a share of ownership and encouraging them to drive the areas where they can most effectively contribute.</p><p>In a multi-faceted domain like data lineage, enabling others to lead discussions is critical.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="making-progress">Making progress<a href="#making-progress" class="hash-link" aria-label="Direct link to Making progress" title="Direct link to Making progress">​</a></h2><p>In this context, we need mechanisms to converge often and make incremental progress. </p><p>You definitely want to avoid having a big monolithic spec that takes a long time to reach consensus on - if you ever do. A discussion around a large ultra-spec that combines specifications from multiple related domains will lose steam. We need to keep conversations focused on the topics that individual contributors care about. It is critical to subdivide the specification in concrete and granular decision points where consistent and significant progress can be made.</p><p>Not everyone will care about all the aspects of the specification, and that is fine. We need to make sure contributors can easily focus on the aspects they do care about. This need for a very granular decision making process, one where we can make progress independently on different aspects of the spec, leads naturally into decomposition of the specification into smaller independent subsets.</p><p>This will keep conversations focused and moving. It also decouples workstreams where consensus can be reached from those that are more contentious. </p><p>For example the contributors interested in data quality might be different from the ones interested in column-level lineage or query performance.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="embracing-different-points-of-view">Embracing different points of view<a href="#embracing-different-points-of-view" class="hash-link" aria-label="Direct link to Embracing different points of view" title="Direct link to Embracing different points of view">​</a></h2><p>Depending on their perspective, contributors may have very different opinions on how to model a certain aspect of data. Or they may have different use-cases in mind. Instead of pitting different view-points against each other and forcing alignment on every point, it is sometimes beneficial to allow them to be expressed separately. </p><p>For example, when you ask a data practitioner &quot;what is data lineage?&quot; they may have very different definitions for it. </p><ul><li>Some care about how a specific metric is derived from the raw data, and need column level lineage. </li><li>Some will care about compliance with privacy regulations and need relevant metadata to locate sensitive data and trace its movement.</li><li>Some will care about the reliability of data delivery and need data freshness and quality metrics - in particular, how they change over time in correlation with changes in the system.</li></ul><p>All those are valid view points that deserve to be captured appropriately and can be defined independently in a framework that allows them to cohabitate.</p><h1>Mechanics</h1><p>OpenLineage is purposefully providing a faceted model around a minimalistic core spec to enable this granular decision making, minimize friction in contributing, and favor community-driven improvements.</p><p>The core spec focuses on high-level modeling of jobs, runs, datasets, and their relation. Each OpenLineage event refers to a run of a job and its input and output datasets.</p><ul><li>A job is a recurring transformation that reads from datasets and writes to datasets. It has a unique name that identifies it across runs.</li><li>A run identifies an individual execution of a job. It might be an incremental or full batch process. It could also be a streaming job.</li><li>A dataset could be a table in a warehouse or a folder in a blob store. It is consumed or written to by jobs.</li></ul><p><strong>Facets</strong> are pieces of metadata that can be attached to those core entities. Facets have their own schema and capture various aspects of those entities.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="facets-are-individual-atomic-specs">Facets are individual atomic specs<a href="#facets-are-individual-atomic-specs" class="hash-link" aria-label="Direct link to Facets are individual atomic specs" title="Direct link to Facets are individual atomic specs">​</a></h2><p>Like the core model, facets are defined by a <code>JSONSchema</code>. They are a self-contained definition of one aspect of a job, a dataset, or a run at the time the event happened. They make the model extensible. The notion of facets is powerful because it makes it easy to add more information to the model - you just define a new facet. There’s a clear compatibility model when introducing a new facet, since fields that are defined at the same time are grouped together.</p><p>For example, there’s a facet to capture the schema of a dataset. There’s a facet to capture the version of a job in source control. There’s a facet to capture the parameters of a run. Facets are optional and may not apply to every instance of an entity.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="facets-enable-specialization-of-models">Facets enable specialization of models<a href="#facets-enable-specialization-of-models" class="hash-link" aria-label="Direct link to Facets enable specialization of models" title="Direct link to Facets enable specialization of models">​</a></h2><p>The core entities are fairly generic. A dataset might be a table in a warehouse or a topic in a Kafka broker. A job might be a SQL query or a machine learning training job.</p><p>This generic high level model of lineage can be specialized by adding facets for that particular type of entity. At-rest data might be versioned, enabling transactions at the run level. Streaming data might capture the offsets and partitions where a streaming job started reading. Datasets might have a schema like a warehouse table, or not (for example, in the case of a machine learning model).</p><p>By capturing a generic representation of lineage and allowing progressive specialization of those entities, this approach offers a lot of flexibility. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="facets-allow-expressing-different-point-of-views">Facets allow expressing different point of views<a href="#facets-allow-expressing-different-point-of-views" class="hash-link" aria-label="Direct link to Facets allow expressing different point of views" title="Direct link to Facets allow expressing different point of views">​</a></h2><p>There can be divergent points of view on how to model a certain aspect of metadata. Facets allow these models to cohabitate in a common framework.</p><p>One example of this is capturing the physical plan of a query execution. Each data warehouse might have its own unique way of describing execution plans. It is very valuable to be able to capture both a precise (but maybe too specific) model as well as a generic (but possibly imprecise or lossy) representation. They can be captured as two different facets. This also gives us opportunities to define several competing models and use the resulting information to collaborate on a more unified and generic representation. This emergent modeling is actually extremely useful in an open source setting, and as a way to make incremental progress.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="custom-facets-make-the-model-decentralized">Custom facets make the model decentralized<a href="#custom-facets-make-the-model-decentralized" class="hash-link" aria-label="Direct link to Custom facets make the model decentralized" title="Direct link to Custom facets make the model decentralized">​</a></h2><p>Most importantly, the OpenLineage spec allows custom facets that are defined elsewhere, completely outside of the spec. This allows others to extend the spec as-needed without having to coordinate with anyone or ask any permission from a governing body. They can make their own opinionated definition of an aspect of metadata. All that is required is that they publish a <code>JSONSchema</code> that describes their facets, prefixed by a unique namespace. This lowers the barrier to experimentation and encourages incremental progress by making the experimentation of others visible. The facets that become broadly useful can eventually be represented in the core spec.</p><h1>Contribute!</h1><p>As a community, we’ve done our best to minimize friction when experimenting with or contributing to OpenLineage. We’re looking forward to seeing you join us as we make data lineage transparent across the data ecosystem.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/dataquality_expectations_facet"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Expecting Great Quality with OpenLineage Facets</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/joining-lfai"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">OpenLineage joins the LF AI &amp; Data Foundation</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#open-source" class="table-of-contents__link toc-highlight">Open Source</a></li><li><a href="#making-progress" class="table-of-contents__link toc-highlight">Making progress</a></li><li><a href="#embracing-different-points-of-view" class="table-of-contents__link toc-highlight">Embracing different points of view</a></li><li><a href="#facets-are-individual-atomic-specs" class="table-of-contents__link toc-highlight">Facets are individual atomic specs</a></li><li><a href="#facets-enable-specialization-of-models" class="table-of-contents__link toc-highlight">Facets enable specialization of models</a></li><li><a href="#facets-allow-expressing-different-point-of-views" class="table-of-contents__link toc-highlight">Facets allow expressing different point of views</a></li><li><a href="#custom-facets-make-the-model-decentralized" class="table-of-contents__link toc-highlight">Custom facets make the model decentralized</a></li></ul></div></div></div></div></div></div>
<script src="/assets/js/runtime~main.28523594.js"></script>
<script src="/assets/js/main.294e6e3e.js"></script>
</body>
</html>