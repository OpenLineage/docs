<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">How OpenLineage takes inspiration from OpenTelemetry | OpenLineage</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openlineage.io/blog/openlineage-takes-inspiration-from-opentelemetry"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="How OpenLineage takes inspiration from OpenTelemetry | OpenLineage"><meta data-rh="true" name="description" content="The data world and the service world have many similarities but also a few crucial differences."><meta data-rh="true" property="og:description" content="The data world and the service world have many similarities but also a few crucial differences."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2021-06-20T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://www.github.com/julienledem/"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://openlineage.io/blog/openlineage-takes-inspiration-from-opentelemetry"><link data-rh="true" rel="alternate" href="https://openlineage.io/blog/openlineage-takes-inspiration-from-opentelemetry" hreflang="en"><link data-rh="true" rel="alternate" href="https://openlineage.io/blog/openlineage-takes-inspiration-from-opentelemetry" hreflang="x-default"><link rel="alternate" type="application/json" href="/blog/feed.json" title="OpenLineage JSON Feed">






<script src="https://plausible.io/js/script.js" defer="defer" data-domain="openlineage.io"></script><link rel="stylesheet" href="/assets/css/styles.790748d3.css">
<link rel="preload" href="/assets/js/runtime~main.af4fefa9.js" as="script">
<link rel="preload" href="/assets/js/main.e763e2e4.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#f26522;color:#091E42" role="banner"><div class="content_knG7 announcementBarContent_xLdY">Help chart the course of OpenLineage! The 2023 Ecosystem Survey is live and accepting responses. <a href="https://forms.gle/cPk3skNgnB4iab9H6">Submit yours today</a>.</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/ol-logo.svg" alt="OpenLineage" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/ol-logo.svg" alt="OpenLineage" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/getting-started">Getting Started</a><a class="navbar__item navbar__link" href="/resources">Resources</a><a class="navbar__item navbar__link" href="/ecosystem">Ecosystem</a><a class="navbar__item navbar__link" href="/community">Community</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/OpenLineage/openlineage" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/warsaw-meetup">Meet Us in Warsaw on November 29th!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/metaphor-integration">Metaphor&#x27;s Integration with OpenLineage Enhances Data Governance and Collaboration</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/airflow-provider">The OpenLineage Airflow Provider is Here</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/airflow-summit-meetup">Meet Us in Toronto on September 18th!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/1.0-release">Announcing OpenLineage 1.0</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">How OpenLineage takes inspiration from OpenTelemetry</h1><div class="container_mt6G margin-vert--md"><time datetime="2021-06-20T00:00:00.000Z" itemprop="datePublished">June 20, 2021</time> · <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://www.github.com/julienledem/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/367841?v=4" alt="Julien Le Dem"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://www.github.com/julienledem/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Julien Le Dem</span></a></div><small class="avatar__subtitle" itemprop="description">OpenLineage Project Lead</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>The data world and the service world have many similarities but also a few crucial differences. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-vs-services">Data vs Services<a href="#data-vs-services" class="hash-link" aria-label="Direct link to Data vs Services" title="Direct link to Data vs Services">​</a></h2><p>The data world and the service world have many similarities but also a few crucial differences.
Let’s start by drawing the similarities:</p><ul><li>The contract for services is the API, in the data world the contract is the dataset schema. </li><li>Properly tracked Data lineage is as powerful as distributed request tracing for services.</li><li>Data Quality checks are the data pipelines equivalent of services’ circuit breakers.</li><li>The Data catalog is data’s service discovery</li><li>Data quality metrics are similar to service metrics and both can define SLOs.</li></ul><table><thead><tr><th align="left"></th><th align="left"><strong>Data</strong></th><th align="left"><strong>Services</strong></th></tr></thead><tbody><tr><td align="left"><strong>Contract</strong></td><td align="left">Dataset schema</td><td align="left">Service API</td></tr><tr><td align="left"><strong>Tracking Dependencies</strong></td><td align="left">Data lineage</td><td align="left">Distributed traces</td></tr><tr><td align="left"><strong>Preventing cascading failures</strong></td><td align="left">Data Quality checks</td><td align="left">Circuit breakers</td></tr><tr><td align="left"><strong>Discovery</strong></td><td align="left">Data catalog</td><td align="left">Service Discovery</td></tr><tr><td align="left"><strong>SLOs</strong></td><td align="left">Freshness, data quality</td><td align="left">Availability, latency</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="observability-in-the-services-world">Observability in the Services world<a href="#observability-in-the-services-world" class="hash-link" aria-label="Direct link to Observability in the Services world" title="Direct link to Observability in the Services world">​</a></h2><p>In many ways, observability is a lot more mature in the services world than it is in the data world.
Service telemetry data is usually described as traces, metrics and logs that allow us to observe how services behave and interact with each other. Recognizing how telemetry data is connected across service layers is key to understanding and mitigating complex distributed failures in today’s environments.
OpenTelemetry is the standard that allows collection of telemetry data in a uniform, vendor-agnostic way across services and databases. For example, it enables the understanding of dependencies between microservices, facilitating investigation into how a single failure might impact services several layers removed.
The creation of OpenTelemetry removed the need for every monitoring, tracing analysis and log indexing platform to create unique integrations to collect that information from the environment.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="observability-in-the-data-world">Observability in the Data world<a href="#observability-in-the-data-world" class="hash-link" aria-label="Direct link to Observability in the Data world" title="Direct link to Observability in the Data world">​</a></h2><p>The data world is organized in a slightly different manner. Services strive for high availability  and expose a contract to be requested from. Data pipelines consume datasets and produce datasets. They could be executed as batch processes or using streaming engines but their fundamental contract is to consume data from given inputs and produce data to given outputs. The contract is now the schema of the dataset and an expectation of a rate of update. </p><p>In this world observability cares about a few things:</p><ul><li><strong>Is the data being delivered?</strong> We might be happy with data being delivered at an hourly or daily rate but we want to know if the job responsible for this is failing and won’t be updating it at all. As a consequence all the datasets depending on this will also not be updated. Correlated SLA misses likes this must be identified to avoid many teams investigating the same problem independently.</li><li><strong>Is the data being delivered on time?</strong> Batch processing for example is relatively forgiving and can still deliver outputs according to a time SLA even when it failed and had to retry or was slower than usual because of disruptions in its environment. However critical data will need to be delivered according to pre-defined SLA. We want to be able to understand where in the data pipeline dependencies, a bottleneck caused a delay and resolve the issue.</li><li><strong>Is the data correct?</strong> Now the worst thing that can happen is not a data pipeline failing. This case is relatively easy to recover from. Once the issue is fixed and the pipeline restarted, it will typically catch up and get back to normal operation after the delay induced by the failure. The worst case scenario for a data engineer or data scientist, is the pipeline carrying through and producing bad data. This usually propagates to downstream consumers and all over the place. Recovering requires understanding that the data is incorrect (usually using a data quality library like Great Expectations or Deequ), identifying the upstream dataset where the problem originated, identifying the downstream datasets where the problem propagated, and restating all those datasets to the correct result.</li><li><strong>Auditing what happened:</strong> Another common need whether it’s for compliance or governance reasons is being able to know if specific sensitive datasets are used according to a defined set of rules. This can be used to protect user privacy, comply with financial regulation, or ensure that key metrics are derived from trusted data sources.</li></ul><p>The key common element in all those use cases is understanding dependencies through <strong>data lineage</strong>, just like services care about understanding dependencies through service traces.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="differences-between-the-data-world-and-the-service-world">Differences Between the Data world and the service world<a href="#differences-between-the-data-world-and-the-service-world" class="hash-link" aria-label="Direct link to Differences Between the Data world and the service world" title="Direct link to Differences Between the Data world and the service world">​</a></h2><p>If the data world has exactly the same needs for observability than the service world, there are key differences between the two that create the need for a different API to instrument data pipelines.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="overall-dependency-structure">Overall dependency structure:<a href="#overall-dependency-structure" class="hash-link" aria-label="Direct link to Overall dependency structure:" title="Direct link to Overall dependency structure:">​</a></h3><ul><li><strong>Services</strong> dependencies can vary at the request level. Different requests to the same service may trigger very different downstream requests to other services. Service logic may create very different dependency patterns depending on input, timing and context. Services depend on other services that can be persistent or stateless.</li><li><strong>Data</strong> pipelines tend to be expressed in terms of a transformation from a defined set of input datasets to one or several output datasets. Their input/output structure tends to be a lot more stable and not vary much from record to record in the dataset. It’s effectively a bigraph: jobs consume datasets and datasets are produced by jobs.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="push-vs-pull">Push vs Pull:<a href="#push-vs-pull" class="hash-link" aria-label="Direct link to Push vs Pull:" title="Direct link to Push vs Pull:">​</a></h3><ul><li><strong>Services</strong> send or push requests to downstream services. Whether it’s synchronous or asynchronous, they can add a traceid to their request that will be propagated downstream. An upstream request spawns one or more downstream requests in a tree structure.</li><li><strong>Data</strong> pipelines pull data from the datasets they consume from. They aggregate and join datasets together. The structure of dependencies is typically a Directed Acyclic Graph at the dataset level instead of a tree at the request level. This means that the granularity of updates does not match one to one in a lot of cases. The frequency of updates can be different from one pipeline to the next and does not neatly align with a trace flowing down the dependencies.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="granularity-of-data-updates">Granularity of data updates<a href="#granularity-of-data-updates" class="hash-link" aria-label="Direct link to Granularity of data updates" title="Direct link to Granularity of data updates">​</a></h3><ul><li><strong>Services</strong> treat one request at a time and tend to optimize for latency of the request being processed.</li><li><strong>Data</strong> pipelines consume entire datasets and tend to prioritize throughput over latency. The result output can be combining many records from various inputs. When a service request spawns multiple requests downstream a data pipeline tends to do the opposite at the record level while producing multiple derived datasets.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="parallels-between-openlineage-and-opentelemetry">Parallels between OpenLineage and <a href="https://opentelemetry.io/docs/concepts/what-is-opentelemetry/" target="_blank" rel="noopener noreferrer">OpenTelemetry</a><a href="#parallels-between-openlineage-and-opentelemetry" class="hash-link" aria-label="Direct link to parallels-between-openlineage-and-opentelemetry" title="Direct link to parallels-between-openlineage-and-opentelemetry">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="an-api-first">An API first<a href="#an-api-first" class="hash-link" aria-label="Direct link to An API first" title="Direct link to An API first">​</a></h3><p>Like OpenTelemetry is an API to collect traces, logs and metrics, OpenLineage is first an API to collect lineage. It is agnostic to the backend collecting the data and aspires to be integrated in every data processing engine.
Data lineage is the equivalent of traces for services. It keeps track of dependencies between datasets and data pipelines and how they change over time. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="broad-language-support">Broad language support<a href="#broad-language-support" class="hash-link" aria-label="Direct link to Broad language support" title="Direct link to Broad language support">​</a></h3><p>Like OpenTelemetry, OpenLineage has broad language support through the definition of its API in the standard JSONSchema representation. It also has dedicated clients to simplify using its semantics in the languages most commonly used for data processing (Java and Python).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="backend-agnostic">Backend agnostic<a href="#backend-agnostic" class="hash-link" aria-label="Direct link to Backend agnostic" title="Direct link to Backend agnostic">​</a></h3><p>Like OpenTelemetry, OpenLineage allows the implementation of multiple backends to consume lineage events for a variety of use cases. For example Marquez is an Open Source reference implementation that keeps track of all the changes in your environment and will help you understand what happened if something goes wrong.
Other metadata projects like Egeria, DataHub, Atlas or Amundsen can also benefit from OpenLineage. Egeria in particular is committed to support OpenLineage as a Metadata bus.
Like OpenTelemetry, anybody can consume and leverage OpenLineage events.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="integrates-with-popular-frameworks-and-libraries">Integrates with popular frameworks and libraries<a href="#integrates-with-popular-frameworks-and-libraries" class="hash-link" aria-label="Direct link to Integrates with popular frameworks and libraries" title="Direct link to Integrates with popular frameworks and libraries">​</a></h3><p>Like OpenTelemetry, OpenLineage aspires to be integrated in every data processing tool in the ecosystem. It also provides integration with popular tools that are not integrated yet. For example today you can cover Apache Spark, BigQuery, Snowflake, Redshift, Apache Airflow and others.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="openlineage-specific-capabilities">OpenLineage specific capabilities<a href="#openlineage-specific-capabilities" class="hash-link" aria-label="Direct link to OpenLineage specific capabilities" title="Direct link to OpenLineage specific capabilities">​</a></h3><p>In addition to those, OpenLineage is extensible to cover various aspects of metadata that are specific to the data world. OpenLineage defines a notion of facet that lets attach well defined pieces of metadata to the OpenLineage entities (Jobs, Runs and Datasets). Facets can be either part of the core spec or be defined as custom facets by third parties. This flexible mechanism lets define independent specs for dataset schema, query profiles or data quality metrics for example. But this is a topic for another post.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/backfilling-airflow-dags-using-marquez"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Backfilling Airflow DAGs using Marquez</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#data-vs-services" class="table-of-contents__link toc-highlight">Data vs Services</a></li><li><a href="#observability-in-the-services-world" class="table-of-contents__link toc-highlight">Observability in the Services world</a></li><li><a href="#observability-in-the-data-world" class="table-of-contents__link toc-highlight">Observability in the Data world</a></li><li><a href="#differences-between-the-data-world-and-the-service-world" class="table-of-contents__link toc-highlight">Differences Between the Data world and the service world</a><ul><li><a href="#overall-dependency-structure" class="table-of-contents__link toc-highlight">Overall dependency structure:</a></li><li><a href="#push-vs-pull" class="table-of-contents__link toc-highlight">Push vs Pull:</a></li><li><a href="#granularity-of-data-updates" class="table-of-contents__link toc-highlight">Granularity of data updates</a></li></ul></li><li><a href="#parallels-between-openlineage-and-opentelemetry" class="table-of-contents__link toc-highlight">Parallels between OpenLineage and OpenTelemetry</a><ul><li><a href="#an-api-first" class="table-of-contents__link toc-highlight">An API first</a></li><li><a href="#broad-language-support" class="table-of-contents__link toc-highlight">Broad language support</a></li><li><a href="#backend-agnostic" class="table-of-contents__link toc-highlight">Backend agnostic</a></li><li><a href="#integrates-with-popular-frameworks-and-libraries" class="table-of-contents__link toc-highlight">Integrates with popular frameworks and libraries</a></li><li><a href="#openlineage-specific-capabilities" class="table-of-contents__link toc-highlight">OpenLineage specific capabilities</a></li></ul></li></ul></div></div></div></div></div></div>
<script src="/assets/js/runtime~main.af4fefa9.js"></script>
<script src="/assets/js/main.e763e2e4.js"></script>
</body>
</html>