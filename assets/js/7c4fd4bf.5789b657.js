"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6188],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=s(n),h=r,y=d["".concat(p,".").concat(h)]||d[h]||c[h]||o;return n?a.createElement(y,i(i({ref:t},u),{},{components:n})):a.createElement(y,i({ref:t},u))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},65004:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var a=n(87462),r=(n(67294),n(3905));const o={title:"OpenLineage Proxy",sidebar_position:3},i=void 0,l={unversionedId:"development/ol-proxy",id:"development/ol-proxy",title:"OpenLineage Proxy",description:"OpenLineage Proxy is a simple Java server that can be used to monitor the JSON events that OpenLineage client emits, as well as tunnel the transmission to the OpenLineage backend such as Marquez.",source:"@site/docs/development/ol-proxy.md",sourceDirName:"development",slug:"/development/ol-proxy",permalink:"/docs/development/ol-proxy",draft:!1,editUrl:"https://github.com/OpenLineage/docs/tree/main/docs/development/ol-proxy.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"OpenLineage Proxy",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Example Lineage Events",permalink:"/docs/development/examples"},next:{title:"1.12.0",permalink:"/docs/releases/1_12_0"}},p={},s=[{value:"Accessing the proxy",id:"accessing-the-proxy",level:2},{value:"Building the proxy",id:"building-the-proxy",level:2},{value:"Running the proxy",id:"running-the-proxy",level:2},{value:"Monitoring OpenLineage events via Proxy",id:"monitoring-openlineage-events-via-proxy",level:2},{value:"Forwarding the data",id:"forwarding-the-data",level:2},{value:"Other ways to run OpenLineage Proxy",id:"other-ways-to-run-openlineage-proxy",level:2}],u={toc:s};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"OpenLineage Proxy is a simple Java server that can be used to monitor the JSON events that OpenLineage client emits, as well as tunnel the transmission to the OpenLineage backend such as ",(0,r.kt)("a",{parentName:"p",href:"https://marquezproject.ai/"},"Marquez"),"."),(0,r.kt)("p",null,"When you are unable to collect logs on the client side, but want to make sure the event that gets emitted are valid and correct, you can use OpenLineage Proxy to verify the messages."),(0,r.kt)("h2",{id:"accessing-the-proxy"},"Accessing the proxy"),(0,r.kt)("p",null,"OpenLineage proxy can be obtained via github:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"git clone https://github.com/OpenLineage/OpenLineage.git\ncd OpenLineage/proxy/backend\n")),(0,r.kt)("h2",{id:"building-the-proxy"},"Building the proxy"),(0,r.kt)("p",null,"To build the proxy jar, run"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./gradlew build\n")),(0,r.kt)("p",null,"The packaged jar file can be found under ",(0,r.kt)("inlineCode",{parentName:"p"},"./build/libs/")),(0,r.kt)("h2",{id:"running-the-proxy"},"Running the proxy"),(0,r.kt)("p",null,"OpenLineage Proxy requires configuration file named ",(0,r.kt)("inlineCode",{parentName:"p"},"proxy.yml"),". There is an ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/OpenLineage/OpenLineage/blob/main/proxy/backend/proxy.example.yml"},"example")," that you can copy and name it as ",(0,r.kt)("inlineCode",{parentName:"p"},"proxy.yml"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"cp proxy.example.yml proxy.yml\n")),(0,r.kt)("p",null,"By default, the OpenLineage proxy uses the following ports:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"TCP port 8080 is available for the HTTP API server."),(0,r.kt)("li",{parentName:"ul"},"TCP port 8081 is available for the admin interface.")),(0,r.kt)("p",null,"You can then run the proxy using gradlew:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ ./gradlew runShadow\n")),(0,r.kt)("h2",{id:"monitoring-openlineage-events-via-proxy"},"Monitoring OpenLineage events via Proxy"),(0,r.kt)("p",null,"When proxy is running, you can start sending your OpenLineage events just as the same way as you would be sending to any OpenLineage backend server. For example, in your URL for the OpenLineage backend, you can specify it as ",(0,r.kt)("inlineCode",{parentName:"p"},"http://localhost:8080/api/v1/lineage"),"."),(0,r.kt)("p",null,"Once the message is sent to the proxy, you will see the OpenLineage message content (JSON) to the console output of the proxy. You can also specify in the configuration to store the messages into the log file."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"You might have noticed that OpenLineage client (python, java) simply requires ",(0,r.kt)("inlineCode",{parentName:"p"},"http://localhost:8080")," as the URL endpoint. This is possible because the client code adds the ",(0,r.kt)("inlineCode",{parentName:"p"},"/api/v1/lineage")," internally before it makes the request. If you are not using OpenLineage client library to emit OpenLineage events, you must use the full URL in order for the proxy to receive the data correctly.")),(0,r.kt)("h2",{id:"forwarding-the-data"},"Forwarding the data"),(0,r.kt)("p",null,"Not only the OpenLineage proxy is useful in receiving the monitoring the OpenLineage events, it can also be used to relay the events to other endpoints. Please see the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/OpenLineage/OpenLineage/blob/main/proxy/backend/proxy.example.yml"},"example")," of how to set the proxy to relay the events via Kafka topic or HTTP endpoint."),(0,r.kt)("h2",{id:"other-ways-to-run-openlineage-proxy"},"Other ways to run OpenLineage Proxy"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You do not have to clone the git repo and build all the time. OpenLineage proxy is published and available in ",(0,r.kt)("a",{parentName:"li",href:"https://mvnrepository.com/artifact/io.openlineage/openlineage-proxy/"},"Maven Repository"),"."),(0,r.kt)("li",{parentName:"ul"},"You can also run OpenLineage Proxy as a ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/OpenLineage/OpenLineage/blob/main/proxy/backend/Dockerfile"},"docker container"),"."),(0,r.kt)("li",{parentName:"ul"},"There is also a ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/OpenLineage/OpenLineage/tree/main/proxy/backend/chart"},"helm chart for Kubernetes")," available.")))}c.isMDXComponent=!0}}]);