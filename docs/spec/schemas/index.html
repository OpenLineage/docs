<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-spec/schemas">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Working with Schemas | OpenLineage</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openlineage.io/docs/spec/schemas"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Working with Schemas | OpenLineage"><meta data-rh="true" name="description" content="OpenLineage is a rapidly growing open source project, and therefore, will face many new changes in its SPEC. The spec file is based on JSON schema specification and defines how the OpenLineage&#x27;s event message would be structured. More details on what are defined in its object model can be found here."><meta data-rh="true" property="og:description" content="OpenLineage is a rapidly growing open source project, and therefore, will face many new changes in its SPEC. The spec file is based on JSON schema specification and defines how the OpenLineage&#x27;s event message would be structured. More details on what are defined in its object model can be found here."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://openlineage.io/docs/spec/schemas"><link data-rh="true" rel="alternate" href="https://openlineage.io/docs/spec/schemas" hreflang="en"><link data-rh="true" rel="alternate" href="https://openlineage.io/docs/spec/schemas" hreflang="x-default"><link rel="alternate" type="application/json" href="/blog/feed.json" title="OpenLineage JSON Feed">






<script src="https://plausible.io/js/script.js" defer="defer" data-domain="openlineage.io"></script>
<script src="js/google_analytics.js"></script>
<script src="https://www.googletagmanager.com/gtag/js?id=G-QMTWMLMX4M" async></script><link rel="stylesheet" href="/assets/css/styles.e2913961.css">
<link rel="preload" href="/assets/js/runtime~main.fb171db1.js" as="script">
<link rel="preload" href="/assets/js/main.5d89a112.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/ol-logo.svg" alt="OpenLineage" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/ol-logo.svg" alt="OpenLineage" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/getting-started">Getting Started</a><a class="navbar__item navbar__link" href="/resources">Resources</a><a class="navbar__item navbar__link" href="/ecosystem">Ecosystem</a><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a class="navbar__item navbar__link" href="/survey">Ecosystem Survey 2023</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/OpenLineage/openlineage" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">About OpenLineage</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/spec/object-model">Core Specification</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/spec/object-model">Object Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/spec/naming">Naming Conventions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/spec/run-cycle">The Run Cycle</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/spec/facets/">Facets &amp; Extensibility</a><button aria-label="Toggle the collapsible sidebar category &#x27;Facets &amp; Extensibility&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/spec/producers">Producers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/spec/schemas">Working with Schemas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/spec/job-hierarchy">Job Hierarchy</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/client/java/">Client Libraries</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/integrations/about">Integrations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/guides/about">Guides</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq">Frequently Asked Questions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/development/developing/">Development</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/releases/1_9_1">Releases</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Core Specification</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Working with Schemas</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Working with Schemas</h1><p>OpenLineage is a rapidly growing open source project, and therefore, will face many new changes in its <code>SPEC</code>. The spec file is based on <a href="https://json-schema.org/" target="_blank" rel="noopener noreferrer">JSON schema specification</a> and defines how the OpenLineage&#x27;s event message would be structured. More details on what are defined in its object model can be found <a href="/docs/spec/object-model">here</a>.</p><p>When you are working in the OpenLineage project and decided to introduce a new facet or make changes to existing facets, you have to know what needs to be done and also understand how the general build and test process works, so that the OpenLineage specs are well maintained and does not break anything.</p><p>The following guidelines may help you to correctly introduce new changes.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-new-issue-with-label-spec">Create a new issue with label <code>spec</code><a href="#create-a-new-issue-with-label-spec" class="hash-link" aria-label="Direct link to create-a-new-issue-with-label-spec" title="Direct link to create-a-new-issue-with-label-spec">​</a></h2><p>Before you decide to make any changes, it is best advised that you first label your issue with <code>spec</code>. This will indicate the the issue is related to any changes in the current OpenLineage spec.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="make-changes-to-the-specs-version">Make changes to the spec&#x27;s version<a href="#make-changes-to-the-specs-version" class="hash-link" aria-label="Direct link to Make changes to the spec&#x27;s version" title="Direct link to Make changes to the spec&#x27;s version">​</a></h2><p>Whenever there is a change to existing spec file (JSON), you need to bump up the version of the existing current spec, so that the changes can go through the code generation and gradle build. Consider the following spec file, where you will see the URL in <code>$id</code> that shows what is the current spec version the file currently is.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;$schema&quot;: &quot;https://json-schema.org/draft/2020-12/schema&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;$id&quot;: &quot;https://openlineage.io/spec/facets/1-0-1/ColumnLineageDatasetFacet.json&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;$defs&quot;: {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this example, bumping up the version to the new value, should be changed from 1-0-1 to 1-0-2.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;$schema&quot;: &quot;https://json-schema.org/draft/2020-12/schema&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;$id&quot;: &quot;https://openlineage.io/spec/facets/1-0-2/ColumnLineageDatasetFacet.json&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;$defs&quot;: {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>If you do not bump the version to higher number, the code generation of Java client will fail.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="python-clients-codes-need-to-be-manually-updated">Python client&#x27;s codes need to be manually updated<a href="#python-clients-codes-need-to-be-manually-updated" class="hash-link" aria-label="Direct link to Python client&#x27;s codes need to be manually updated" title="Direct link to Python client&#x27;s codes need to be manually updated">​</a></h2><p>Java client&#x27;s build process does involve <code>code generation</code> that automatically produces OpenLineage classes derived from the spec files, so you do not need to do anything in terms of coding the client. However, python client libraries does not depend on the spec files to be generated, so you have to make sure to add changes to the python code in order for it to know and use the changes. As for the facets, they are implemented <a href="https://github.com/OpenLineage/OpenLineage/blob/main/client/python/openlineage/client/facet.py" target="_blank" rel="noopener noreferrer">here</a>, so generally, you need to apply necessary changes to it. As for the general structure of OpenLineage&#x27;s run events, it can be found <a href="https://github.com/OpenLineage/OpenLineage/blob/main/client/python/openlineage/client/run.py" target="_blank" rel="noopener noreferrer">here</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-test-cases">Add test cases<a href="#add-test-cases" class="hash-link" aria-label="Direct link to Add test cases" title="Direct link to Add test cases">​</a></h2><p>Make sure to add changes to the unit tests for <a href="https://github.com/OpenLineage/OpenLineage/tree/main/client/python/tests" target="_blank" rel="noopener noreferrer">python</a> and <a href="https://github.com/OpenLineage/OpenLineage/tree/main/client/java/src/test/java/io/openlineage/client" target="_blank" rel="noopener noreferrer">java</a> to make sure the unit test can be performed against your new SPEC changes. Refer to existing test codes to add yours in.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-the-spec-change-using-code-generation-and-integration-tests">Test the SPEC change using code generation and integration tests<a href="#test-the-spec-change-using-code-generation-and-integration-tests" class="hash-link" aria-label="Direct link to Test the SPEC change using code generation and integration tests" title="Direct link to Test the SPEC change using code generation and integration tests">​</a></h2><p>When you have modified the SPEC file(s), always make sure to perform code generation and unit tests by going into <code>client/java</code> and running <code>./gradlew generateCode</code> and <code>./gradlew test</code>. As for python, cd into <code>client/python</code> and run <code>pytest</code>.</p><blockquote><p>Note: Some of the tests may fail due to the fact that they require external systems like kafka. You can ignore those errors.</p></blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/OpenLineage/docs/tree/main/docs/spec/schemas.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/spec/producers"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Producers</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/spec/job-hierarchy"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Job Hierarchy</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#create-a-new-issue-with-label-spec" class="table-of-contents__link toc-highlight">Create a new issue with label <code>spec</code></a></li><li><a href="#make-changes-to-the-specs-version" class="table-of-contents__link toc-highlight">Make changes to the spec&#39;s version</a></li><li><a href="#python-clients-codes-need-to-be-manually-updated" class="table-of-contents__link toc-highlight">Python client&#39;s codes need to be manually updated</a></li><li><a href="#add-test-cases" class="table-of-contents__link toc-highlight">Add test cases</a></li><li><a href="#test-the-spec-change-using-code-generation-and-integration-tests" class="table-of-contents__link toc-highlight">Test the SPEC change using code generation and integration tests</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.fb171db1.js"></script>
<script src="/assets/js/main.5d89a112.js"></script>
</body>
</html>